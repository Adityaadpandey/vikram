datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated"
}


model User{
  id String @id
  phone String @unique
  name String?
  designation String?
  Friends Friend[] @relation("UserFriends")
  FriendOf Friend[] @relation("FriendOf")
  keys Key[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Key{
  id String @id @default(cuid())
  userId String
  user User @relation(fields: [userId], references: [id])
  publicKey String
  privateKey String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Friend{
  friendId String @id @default(cuid())
  userId String
  user User @relation("UserFriends", fields: [userId], references: [id])
  friend User @relation("FriendOf", fields: [friendId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, friendId])
}
